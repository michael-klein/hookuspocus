var n=window.___hookusPocusRunMap||new(WeakMap||Map);window.___hookusPocusRunMap=n;var e=n.h||[];n.h=e;var t=n.d||new(WeakMap||Map);n.d=t;var r=function(r){return function o(){var u=e[n.stackIndex][0];n.hookIndex++;var a=e[n.stackIndex][n.hookIndex]||(e[n.stackIndex][n.hookIndex]=[{context:u,hook:r}]);return(t.get(o)||r).apply({},a.concat(Array.from(arguments)))}},o=function(t,r){var o=e[n.stackIndex].map(function(n){if(n[0]&&n[0][r]){var e=n[0][r]();return n[0][r]=0,e}}).filter(function(n){return n instanceof Promise});if(o.length>0){var u=Promise.all(o);n.set(t,n.has(t)?n.get(t).then(u):u)}},u=function(e,t){if(n.has(e)){var r=n.get(e).then(t);return n.set(e,r),r}return t()},a=function(){var r,a=Array.from(arguments);return a[0].pop&&(r=a.shift()),function(r,a,c,f){if(!0!==a)return u(r,function(){return n.hookIndex=0,n.stackIndex=e.push(t.get(r)||[r])-1,t.set(r,e[n.stackIndex]),o(r,"before"),u(r,function(){var t=c.apply(c,f);return o(r,"after"),u(r,function(){return e.pop(),n.delete(r),t})})});n.set(r,o(r,"cleanUp")),t.delete(r)}("boolean"==typeof a[1]?a[0]:a[1]||a[0],!0===a[1]||a[2],a[0],r)},c=r(function(n,e,t,r){return n.s=void 0!==n.s?n.s:r?r(t):t,[n.s,function(t){return n.s=e(n.s,t),n.s}]}),f=function(n,e){t.set(n,e)},i=r(function(n,e,t){n.v&&(!t||t.length===n.v.length&&t.every(function(e){return~n.v.indexOf(e)}))||(n.v=t,n.cleanUp&&n.cleanUp(),n.after=function(){var t=e();return t instanceof Promise?t=t.then(function(e){return n.cleanUp=e}):n.cleanUp=t,t})});exports.on=f,exports.onStateChanged=function(n){return f(c,function(e,t,r,o){var u=e.hook(e,t,r,o),a=u[0],c=u[1];return[a,function(t){var r=c(t);return a!==r&&n(e.context),r}]})},exports.hookus=r,exports.pocus=a,exports.useLayoutEffect=i,exports.useEffect=function(n,e){i(function(){return new Promise(function(e){return requestAnimationFrame(function(t){return e(n())})})},e)},exports.useReducer=c,exports.useState=function(n){var e=c(function(n,e){return e.value},n),t=e[1];return[e[0],function(n){return t({value:n})}]},exports.fidibus=function(n,e){var t=function(){var t=Array.from(arguments);return t.length>0?a(t,n,e):a(n,e)};return t.cleanUp=function(){a(n,e,!0)},t};
//# sourceMappingURL=hookuspocus.js.map
