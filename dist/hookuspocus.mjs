var n=window.___hookusPocusRunMap||new(WeakMap||Map);window.___hookusPocusRunMap=n;var t=n.h||[];n.h=t;var e=n.d||new(WeakMap||Map);n.d=e;var r=function(r){return function o(){var u=t[n.stackIndex][0];n.hookIndex++;var a=t[n.stackIndex][n.hookIndex]||(t[n.stackIndex][n.hookIndex]=[{context:u,hook:r}]);return(e.get(o)||r).apply({},a.concat(Array.from(arguments)))}},o=function(e,r){var o=t[n.stackIndex].map(function(n){if(n[0]&&n[0][r]){var t=n[0][r]();return n[0][r]=0,t}}).filter(function(n){return n instanceof Promise});if(o.length>0){var u=Promise.all(o);n.set(e,n.has(e)?n.get(e).then(u):u)}},u=function(t,e){if(n.has(t)){var r=n.get(t).then(e);return n.set(t,r),r}return e()},a=function(){var r,a=Array.from(arguments);return a[0].pop&&(r=a.shift()),function(r,a,c,i){if(!0!==a)return u(r,function(){return n.hookIndex=0,n.stackIndex=t.push(e.get(r)||[r])-1,e.set(r,t[n.stackIndex]),o(r,"before"),u(r,function(){var e=c.apply(c,i);return o(r,"after"),u(r,function(){return t.pop(),n.delete(r),e})})});n.set(r,o(r,"cleanUp")),e.delete(r)}("boolean"==typeof a[1]?a[0]:a[1]||a[0],!0===a[1]||a[2],a[0],r)},c=r(function(n,t,e,r){return n.s=void 0!==n.s?n.s:r?r(e):e,[n.s,function(e){return n.s=t(n.s,e),n.s}]}),i=function(n,t){e.set(n,t)},f=function(n){return i(c,function(t,e,r,o){var u=t.hook(t,e,r,o),a=u[0],c=u[1];return[a,function(e){var r=c(e);return a!==r&&n(t.context),r}]})},s=r(function(n,t,e){n.v&&(!e||e.length===n.v.length&&e.every(function(t){return~n.v.indexOf(t)}))||(n.v=e,n.cleanUp&&n.cleanUp(),n.after=function(){var e=t();return e instanceof Promise?e=e.then(function(t){return n.cleanUp=t}):n.cleanUp=e,e})}),v=function(n,t){s(function(){return new Promise(function(t){return requestAnimationFrame(function(e){return t(n())})})},t)},p=function(n){var t=c(function(n,t){return t.value},n),e=t[1];return[t[0],function(n){return e({value:n})}]},h=function(n,t){var e=function(){var e=Array.from(arguments);return e.length>0?a(e,n,t):a(n,t)};return e.cleanUp=function(){a(n,t,!0)},e};export{i as on,f as onStateChanged,r as hookus,a as pocus,s as useLayoutEffect,v as useEffect,c as useReducer,p as useState,h as fidibus};
//# sourceMappingURL=hookuspocus.mjs.map
